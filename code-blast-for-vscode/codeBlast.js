!function(t){var e={};function a(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(s,r,function(e){return t[e]}.bind(null,r));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);let s=null;class r{constructor(){}static throttle(t,e){var a=!1;return function(){a||(t.apply(this,arguments),a=!0,setTimeout((function(){a=!1}),e))}}static random(t,e){return e||(e=t,t=0),t+~~(Math.random()*(e-t+1))}static getAccessibleColor(t){let[e,a,s]=t,r=[e/255,a/255,s/255].map(t=>t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4));return.2126*r[0]+.7152*r[1]+.0722*r[2]>.179?[0,0,0]:[255,255,255]}static randColor(){return"rgb("+(100+Math.floor(255*Math.random()))+","+Math.floor(150*Math.random())+","+Math.floor(15*Math.random())+")"}static getDebugToolbar(){return s||(s=document.querySelector(".debug-toolbar"),s)}}var i=class{constructor(t){this.ctx=t,this.particles=[],this.particlePointer=0,this.MAX_PARTICLES=500,this.PARTICLE_NUM_RANGE={min:5,max:10},this.PARTICLE_GRAVITY=.08,this.PARTICLE_ALPHA_FADEOUT=.96,this.PARTICLE_VELOCITY_RANGE={x:[-1,1],y:[-3.5,-1.5]},this.cursorPos={left:0,top:0},this.color=[0,0,0]}setCursorPositon(t){this.cursorPos=t}setColor(t){this.color=t}spawnParticles(){for(var t=r.random(this.PARTICLE_NUM_RANGE.min,this.PARTICLE_NUM_RANGE.max);t--;)this.particles[this.particlePointer]=this.createParticle(this.cursorPos.left+10,this.cursorPos.top,this.color),this.particlePointer=(this.particlePointer+1)%this.MAX_PARTICLES}drawParticles(){for(var t,e=this.particles.length;e--;)!(t=this.particles[e])||t.alpha<.01||t.size<=.5||this.drawParticle(t)}createParticle(){}drawParticle(t){}};var o=class extends i{constructor(t){super(t)}createParticle(t,e,a){var s={x:t,y:e+10,alpha:1,color:a};return s.size=r.random(2,4),s.vx=this.PARTICLE_VELOCITY_RANGE.x[0]+Math.random()*(this.PARTICLE_VELOCITY_RANGE.x[1]-this.PARTICLE_VELOCITY_RANGE.x[0]),s.vy=this.PARTICLE_VELOCITY_RANGE.y[0]+Math.random()*(this.PARTICLE_VELOCITY_RANGE.y[1]-this.PARTICLE_VELOCITY_RANGE.y[0]),s}drawParticle(t){t.vy+=this.PARTICLE_GRAVITY,t.x+=t.vx,t.y+=t.vy,t.alpha*=this.PARTICLE_ALPHA_FADEOUT,this.ctx.fillStyle="rgba("+t.color[0]+","+t.color[1]+","+t.color[2]+","+t.alpha+")",this.ctx.fillRect(Math.round(t.x-1),Math.round(t.y-1),t.size,t.size)}};var l=class extends i{constructor(t){super(t)}createParticle(t,e,a){var s={x:t,y:e+10,alpha:1,color:a};return s.size=r.random(2,8),s.drag=.92,s.vx=r.random(-3,3),s.vy=r.random(-3,3),s.wander=.15,s.theta=r.random(0,360)*Math.PI/180,s}drawParticle(t){t.x+=t.vx,t.y+=t.vy,t.vx*=t.drag,t.vy*=t.drag,t.theta+=r.random(-.5,.5),t.vx+=.1*Math.sin(t.theta),t.vy+=.1*Math.cos(t.theta),t.size*=.96,this.ctx.fillStyle="rgba("+t.color[0]+","+t.color[1]+","+t.color[2]+","+t.alpha+")",this.ctx.beginPath(),this.ctx.arc(Math.round(t.x-1),Math.round(t.y-1),t.size,0,2*Math.PI),this.ctx.fill()}};var c=class extends i{constructor(t){super(t)}spawnParticles(){this.particles=this.particles.filter(t=>t&&t.alpha>.01),this.particles.push(this.createParticle(this.cursorPos.left+10,this.cursorPos.top,this.color))}createParticle(t,e,a){var s={x:t,y:e+10,alpha:1,color:a};return s.vx=r.random(-1,1),s.vy=r.random(-2,-1),s.text=config.texts&&config.texts.length>0&&config.texts[r.random(0,config.texts.length-1)]||"hello",s}drawParticle(t){t.x+=t.vx,t.y+=t.vy,t.alpha*=this.PARTICLE_ALPHA_FADEOUT,this.ctx.font="14px Consolas, 'Courier New', monospace",this.ctx.fillStyle="rgba("+t.color[0]+","+t.color[1]+","+t.color[2]+","+t.alpha+")",this.ctx.fillText(t.text,t.x,t.y)}};var n=class extends i{constructor(t){super(t)}createParticle(t,e,a){var s={x:t,y:e+10,alpha:1,color:a};return s.size=r.random(4,16),s.vx=this.PARTICLE_VELOCITY_RANGE.x[0]+Math.random()*(this.PARTICLE_VELOCITY_RANGE.x[1]-this.PARTICLE_VELOCITY_RANGE.x[0]),s.vy=this.PARTICLE_VELOCITY_RANGE.y[0]+Math.random()*(this.PARTICLE_VELOCITY_RANGE.y[1]-this.PARTICLE_VELOCITY_RANGE.y[0]),s}drawParticle(t){t.vy+=this.PARTICLE_GRAVITY,t.x+=t.vx,t.y+=t.vy,t.alpha*=this.PARTICLE_ALPHA_FADEOUT;var e=t.size/2;this.ctx.fillStyle="rgba("+t.color[0]+","+t.color[1]+","+t.color[2]+","+t.alpha+")",this.ctx.beginPath();for(let a=0;a<5;a++)this.ctx.lineTo(Math.cos((18+72*a)/180*Math.PI)*e+t.x,-Math.sin((18+72*a)/180*Math.PI)*e+t.y),this.ctx.lineTo(Math.cos((54+72*a)/180*Math.PI)*e/2.4+t.x,-Math.sin((54+72*a)/180*Math.PI)*e/2.4+t.y);this.ctx.closePath(),this.ctx.fill()}};var h=class extends i{constructor(t){super(t)}createParticle(t,e,a){var s={x:t,y:e+10,alpha:1,color:a};return s.size=r.random(2,8),s.drag=.92,s.vx=r.random(-3,3),s.vy=r.random(-3,3),s.wander=.15,s.theta=r.random(0,360)*Math.PI/180,s}drawParticle(t){t.x+=t.vx,t.y+=t.vy,t.vx*=t.drag,t.vy*=t.drag,t.theta+=r.random(-.5,.5),t.vx+=.1*Math.sin(t.theta),t.vy+=.1*Math.cos(t.theta),t.size*=.96,this.ctx.save(),this.ctx.translate(t.x,t.y),this.ctx.scale(t.size,t.size),this.ctx.beginPath(),this.ctx.arc(-1,0,1,Math.PI,0,!1),this.ctx.arc(1,0,1,Math.PI,0,!1),this.ctx.bezierCurveTo(1.9,1.2,.6,1.6,0,3),this.ctx.bezierCurveTo(-.6,1.6,-1.9,1.2,-2,0),this.ctx.closePath(),this.ctx.fillStyle="rgba("+t.color[0]+","+t.color[1]+","+t.color[2]+","+t.alpha+")",this.ctx.fill(),this.ctx.restore()}};var d=class extends i{constructor(t){super(t)}spawnParticles(){var t=30;for(let e=0;e<6;e++)0===e?this.particles[e]=this.createParticle(this.cursorPos.left,this.cursorPos.top-20,16,this.color):(this.particles[e]=this.createParticle(this.cursorPos.left+t,this.cursorPos.top-16,4,this.color),t+=30)}createParticle(t,e,a,s){return{x:t,y:e,size:a,color:s,alpha:1,type:a>4?"pac-man":"pills"}}drawParticle(t){if(this.ctx.fillStyle="rgba(252,252,0,"+t.alpha+")",this.ctx.beginPath(),"pills"===t.type)this.ctx.arc(Math.round(t.x-1),Math.round(t.y-1),t.size,0,2*Math.PI),this.ctx.fill(),t.x-=2,t.x<this.particles[0].x+8&&this.particles.splice(this.particles.indexOf(t),1),1===this.particles.length&&(this.particles.length=0);else{t.angle=t.angle||0,0===t.angle&&(t.dAngle=10),60===t.angle&&(t.dAngle=-10);let e=t.angle+t.dAngle,a=360-e,s=Math.PI/180;this.ctx.arc(Math.round(t.x-1),Math.round(t.y-1),t.size,s*e,s*a),this.ctx.lineTo(Math.round(t.x-1),Math.round(t.y-1)),this.ctx.fill(),t.angle+=t.dAngle}t.alpha*=this.PARTICLE_ALPHA_FADEOUT}};var p=class extends i{constructor(t){super(t)}spawnParticles(){this.particles.length<100&&this.particles.push(this.createParticle(this.cursorPos.left+10,this.cursorPos.top-10))}createParticle(t,e){return{xPos:t,yPos:e,xSpeed:3*Math.random()-1.5,ySpeed:1+5.5*Math.random(),rad:1+Math.floor(20*Math.random()),life:50,color:r.randColor(),opacity:1,dead:!1}}drawParticles(){let t=this.particles.length;if(0===t)return;let e=0;t<100&&this.particles.push(this.createParticle(this.cursorPos.left+10,this.cursorPos.top-10));for(let t=0;t<this.particles.length;t++){let a=this.particles[t];!a||a.yPos<0||0===a.life||0===a.opacity||a.rad<1?(a.dead=!0,e++):(this.drawParticle(a),a.dead||(a.yPos-=a.ySpeed,a.xPos+=a.xSpeed,a.life=a.life-1,a.opacity-=.05,a.rad=a.rad-1))}e===t&&(this.particles=[])}drawParticle(t){this.ctx.globalCompositeOperation="lighter",this.ctx.fillStyle=t.color,this.ctx.beginPath(),this.ctx.arc(t.xPos,t.yPos,t.rad,0,2*Math.PI),this.ctx.globalAlpha=t.opacity,this.ctx.fill(),this.ctx.closePath()}};var f=class{constructor(t,e){switch(this.particleEffectManager=null,e){case"rectangle":this.particleEffectManager=new o(t);break;case"dot":this.particleEffectManager=new l(t);break;case"star":this.particleEffectManager=new n(t);break;case"text":this.particleEffectManager=new c(t);break;case"heart":this.particleEffectManager=new h(t);break;case"pac-man":this.particleEffectManager=new d(t);break;case"fire":this.particleEffectManager=new p(t);break;default:this.particleEffectManager=new o(t)}}spawnParticles(t,e){this.particleEffectManager.spawnParticles()}drawParticles(){this.particleEffectManager.drawParticles()}setCursorPositon(t){this.particleEffectManager.setCursorPositon(t)}setColor(t){this.particleEffectManager.setColor(t)}};class u{constructor(t,e){this.top=t,this.data=e||""}}var g=class{constructor(t,e){if(this.cursorPos={left:0,top:0},this.cursorOffsetTop=0,this.shakeTime=0,this.shakeTimeMax=0,this.shakeIntensity=5,this.lastTime=0,this.editorContainer=e,this.w=e.clientWidth,this.h=e.clientHeight,this.effect=config&&config.particleShape||"dot",this.isActive=!1,this.editor=t,this.translateY=0,this.translateX=0,this.lines=[],this.cmNode=null,this.canvas=null,this.ctx=null,t&&e){var a=e.querySelector("CANVAS#code-blast-canvas");a||(a=document.createElement("canvas"),e.appendChild(a));var s=a.getContext("2d");a.id="code-blast-canvas",a.style.position="absolute",a.style.top=0,a.style.left=0,a.style.zIndex=9999,a.style.pointerEvents="none",a.style.willChange="transform",a.width=t.clientWidth,a.height=t.clientHeight,this.canvas=a,this.ctx=s}this.particleManager=new f(this.ctx,this.effect),this.setParticlesColor(),this.isShaking=!1,this.throttledShake=r.throttle(this.shake,100).bind(this),this.throttledSpawnParticles=r.throttle(this.particleManager.spawnParticles,100).bind(this.particleManager),this.observer=null}shake(t,e){this.cmNode=t,this.shakeTime=this.shakeTimeMax=e}setParticlesColor(){if(config&&config.particleColor)this.particleManager.setColor(config.particleColor);else{var t=[0,0,0],e=getComputedStyle(this.editor).backgroundColor;if(e){var a=/^rgb\(([0-9,\s]{7,})\)/.exec(e);if(a&&a.length>1){var s=a[1].split(",");s=s.map(t=>parseInt(t)),t=r.getAccessibleColor(s)}}this.particleManager.setColor(t)}}loop(){if(this.isActive){this.ctx.clearRect(0,0,this.w,this.h);var t=(new Date).getTime();this.lastTime||(this.lastTime=t);var e=(t-this.lastTime)/1e3;this.lastTime=t,this.shakeTime>0?(this.shakeTime-=e,this.isShaking||(this.cmNode.classList.add("shake"),this.isShaking=!0)):this.cmNode&&this.cmNode.style&&this.isShaking&&(this.cmNode.classList.remove("shake"),this.isShaking=!1),this.particleManager.drawParticles(),requestAnimationFrame(this.loop.bind(this))}}observe(t){var e=this,a=e.editor.getAttribute("id");this.observer=new MutationObserver((function(t){t.forEach((function(t){if("attributes"===t.type&&t.target.classList.contains("monaco-editor")&&a===t.target.getAttribute("id")&&("class"===t.attributeName&&e.setParticlesColor(),e.canvas&&(e.canvas.width=t.target.clientWidth,e.canvas.height=t.target.clientHeight),e.w=t.target.clientWidth,e.h=t.target.clientHeight),"attributes"===t.type&&t.target.classList.contains("lines-content")){var s=getComputedStyle(t.target).top,i=getComputedStyle(t.target).left;e.translateY=parseInt(s),e.translateX=parseInt(i),console.log(`changed by linesContent,x:${e.translateX},y:${e.translateY}`)}if("attributes"==t.type&&"cursor "==t.target.className&&"style"===t.attributeName){if(0==e.translateX&&0==e.translateY){var o=e.editorContainer.querySelector(".editor-instance .lines-content");if(o){s=getComputedStyle(o).top,i=getComputedStyle(o).left;e.translateY=parseInt(s),e.translateX=parseInt(i),console.log(`changed by cursor,x:${e.translateX},y:${e.translateY}`)}}e.cursorPos.left=e.translateX<0?t.target.offsetLeft+67+e.translateX:t.target.offsetLeft+67,e.cursorPos.top=e.translateY<0?t.target.offsetTop+e.translateY:t.target.offsetTop,e.particleManager.setCursorPositon(e.cursorPos),e.cursorOffsetTop=t.target.offsetTop}if("childList"==t.type&&t.target.classList.contains("view-lines")&&1===t.addedNodes.length&&t.addedNodes[0].classList.contains("view-line")){for(var l=-1,c=t.addedNodes[0].innerHTML,n=t.addedNodes[0].offsetTop,h=!1,d=0;d<e.lines.length;d++)if(e.lines[d].top==n){h=!0,l=d;break}if(h)if(""==e.lines[l].data)e.lines[l].data=c;else{if(e.lines[l].data!==c){let a=r.getDebugToolbar();!!a&&"none"!==window.getComputedStyle(a).display||(config&&config.shake&&e.cursorOffsetTop===n&&e.throttledShake(t.target,.3),e.throttledSpawnParticles(e.editor))}e.lines[l].data=c}else{var p=new u(n,c);e.lines.push(p)}}}))})),this.observer.observe(this.editor,t||{childList:!0,attributes:!0,characterData:!0,subtree:!0})}disconnect(){this.observer&&this.observer.disconnect()}},P=new Map;new MutationObserver((function(t){t.forEach((function(t){if(t.target.classList.contains("editor-instance")&&"workbench.editors.files.textFileEditor"===t.target.getAttribute("data-editor-id")){var e;if(t.addedNodes&&t.addedNodes.length>0)if((e=t.addedNodes[0]).classList.contains("monaco-editor")){var a=e.parentNode;if(a){a.style.position="relative";var s=(new Date).getTime().toString();e.setAttribute("id",s);var r=new g(e,a);P.set(s,r),r.isActive=!0,r.loop(),r.observe()}}if(t.removedNodes&&t.removedNodes.length>0)if((e=t.removedNodes[0]).classList.contains("monaco-editor")){s=e.getAttribute("id");(r=P.get(s))&&(r.disconnect(),r=null,P.delete(s))}}}))})).observe(document.body,{childList:!0,subtree:!0})}]);